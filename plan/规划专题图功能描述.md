
#设备着色

所有设备按rowbuffer字段[AREALEVEL]属性值进行分类,属性值为字符串值"A"、"B"、"C"、"D"、"E"、"F"对应A、B、C、D、E、F类。分类字段取值规则在不同专题图是不同的，例如供电距离分析分类属性获取自设备所属于的线路，架空线绝缘化率专题图设备分类属性获取自设备自身的属性。

类别对应的属性值：

| 类别  |  [AREALEVEL]属性值 |
|---|---|
|A|  "A"|
|B|  "B"|
|C|  "C"|
|D|  "D"|
|E|  "E"|
|F|  "F"|

共有如下12种专题图：

1. 供电距离分析
2. 接线模式识别

#供电距离分析

##需求
设备根据所属线路的供电距离和所属的类别进行着色。已明确需求如下：

1. 设备依据所属线路rowbuffer字段[AREALEVEL] 属性分类；
2. 设备的供电距离值来自线路的供电距离；
3. 供电距离值存放在实时数据的第一个槽位；
4. 供电距离单位为m；
5. 着色的类别可多选；

未明确的需求如下：

1. 是否所有点状设备（站房、台边、箱变，负荷）都包含于线路,特别是杆塔；
2. 每个着色标准的颜色值；
3. 站内设备如何处理

着色规则：
1. 属性值说明:

| 类别   | 供电距离(超标值) | 供电距离(正常值) |
| -------|:--------:|:-------|
| A      | 大于3KM     | 小于等于3KM     |
| B      | 大于4KM     | 小于等于4KM     |
| C      | 大于6KM     | 小于等于6KM       |
| D      | 大于6KM     | 小于等于6KM    |
| E      | 大于10KM    | 小于等于10KM    |
| F      | 大于15KM    | 小于等于15KM     |

2. 色值分布:

|    	| 选中 |  未选中  |
|-------|:--------:|:-------:|
| 超标   | ![255,0,0](./images/red.png)   | ![222,225,228](./images/light_gray.png)|    	
| 正常   | ![0,255,0](./images/green.png) | ![222,225,228](./images/light_gray.png) |

默认数据：![222,225,228](./images/light_gray.png)

异常数据：![黑色](./images/black.png)

##实现

在原电网WMS服务的请求连接新增控制参数，实现专题图功能需求。

只对规划使用的WMS参数进行特别说明，如下是真实WMS请求连接的URL:
http://192.168.2.33:9092/services/WMS?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetMap&FORMAT=image/png&TRANSPARENT=true&LAYERS=default&BGCOLOR=0xfFFFFF
&token=9102mjaxni0wmy0wosaxny01nc0zos41odgw
&ID=1
&CRS=EPSG:900913&STYLES&WIDTH=1534&HEIGHT=749&
BBOX=11664439.1844,3066776.44904,11682160.1341,3075610.39175
&rendermode=201
&ghclasses=A,B,C,D,E,F

下面的表格说明规划规划使用到的参数：

| 参数   	   | 值		  		 |  描述       |
| -------------|:---------------:|:---|
| rendermode   | 201     		     | 指定按供电距离渲染电网图      |
| ghclasses    | 逗号分隔的A~F   | 可变字符串,指定对那些类别的设备进行规则着色  |

##现状

因数据NET表中的设备分类字段没有数据，暂时还不能出图。

-------

#接线模式识别

##需求
已明确需求：

1. 设备依据所属线路rowbuffer字段[AREALEVEL] 属性分类；
2. 设备接线模式依据线路rowBuffer字段[CONMODE]；
3. 接线模式属性用中文字符串描述
4. 着色的类别可多选；
5. 未选中和选中但无对应着色的接线模式（非标准）的设备用默认颜色着色；

未明确的需求如下：

1. 是否所有点状设备（站房、台边、箱变，负荷）都包含于线路,特别是杆塔；
2. 其他接线模式字符串值都有那些；

着色规则：
1. 着色不区分类别
2. 超标值说明

| 类别    | 属性值(字符串) |
| -------|:-------:|
| 超标值 | 辐射型     |
| 正常值 | 但环网型、双环网型、两供一备、多分段单联络、多分段两联络、多分段三连络、其他非典型接线 |

3. 色值分布

|    	| 选中 |  未选中  |
| -------|:--------:|:-------:|
| 超标   | ![255,0,0](./images/red.png)   | ![222,225,228](./images/light_gray.png)|    	
| 正常   | ![0,255,0](./images/green.png) | ![222,225,228](./images/light_gray.png) |

默认数据：![222,225,228](./images/light_gray.png)

异常数据：![黑色](./images/black.png)

##实现
在原电网WMS服务的请求连接新增控制参数，实现专题图功能需求。

只对规划使用的WMS参数进行特别说明，如下是真实WMS请求连接的URL:
http://192.168.2.33:9092/services/WMS?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetMap&FORMAT=image/png&TRANSPARENT=true&LAYERS=default&BGCOLOR=0xfFFFFF
&token=9102mjaxni0wmy0wosaxny01nc0zos41odgw
&ID=1
&CRS=EPSG:900913&STYLES&WIDTH=1534&HEIGHT=749&
BBOX=11664439.1844,3066776.44904,11682160.1341,3075610.39175
&rendermode=202
&ghclasses=A,B,C,D,E,F

下面的表格说明规划规划使用到的参数：

| 参数   	     | 值		  		     |  描述       |
| -------------|:---------------:|:----------|
| rendermode   | 202     		| 指定按供电距离渲染电网图      |
| ghclasses    | 逗号分隔的A~F   | 可变字符串,指定对那些类别的设备进行规则着色  |

##现状
线路没有rowbuffer属性[CONMODE]，暂时还不能出图。

-------

#架空线绝缘化率

##需求
已明确需求：

1. 设备依据自身 rowbuffer[AREALEVEL] 属性分类；
2. 只对架空线进行区分着色，其他类型的设备着默认颜色；
3. 依据架空线rowBuffer字段[CONDTYPE]表示的架空线类型判断架空线绝缘化率
4. 型号名称中带"V"或者"Y"则非绝缘架空线
5. 类别可多选；
6. 未选中类别的架空线着默认颜色；
7. 对选中类别的非绝缘架空线进行着色；

着色规则:
1. 着色不区分类别
2. 色值分布

|设备类型|颜色|
|:---:|:---:|
|绝缘导线|![0,255,0](./images/green.png)|
|裸导线  |![255,0,0](./images/red.png)|
|电缆|![蓝色](./images/b.png)|

默认数据：![222,225,228](./images/light_gray.png)

异常数据：![黑色](./images/black.png)

##实现
在原电网WMS服务的请求连接新增控制参数，实现专题图功能需求。

只对规划使用的WMS参数进行特别说明，如下是真实WMS请求连接的URL:
http://192.168.2.33:9092/services/WMS?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetMap&FORMAT=image/png&TRANSPARENT=true&LAYERS=default&BGCOLOR=0xfFFFFF
&token=9102mjaxni0wmy0wosaxny01nc0zos41odgw
&ID=1
&CRS=EPSG:900913&STYLES&WIDTH=1534&HEIGHT=749&
BBOX=11664439.1844,3066776.44904,11682160.1341,3075610.39175
&rendermode=203
&ghclasses=A,B,C,D,E,F

下面的表格说明规划规划使用到的参数：

| 参数   	     | 值		  	 |  描述       |
| -------------|:---------------:|:---|
| rendermode   | 203    		 | 指定按供电距离渲染电网图      |
| ghclasses    | 逗号分隔的A~F    | 可变字符串,指定对那些类别的设备进行规则着色  |

##现状
出图的功能代码未完成，赞不能出图

-------

#负载率

##需求
已明确需求：

1. 设备依据所属线路rowbuffer字段[AREALEVEL] 属性分类；
2. 依据设备所属线路负载率着色；
3. 负载率在实时数据的第二个槽位；
4. 负载率单位 %,例如负载率80%实时数据中的数为80；
5. "高压负荷集中负荷"负载率来自rowbuffer字段[LOAD_RATIO]属性值，属性值规则实时数据规则一致；
6. 着色的类别可多选；
7. 为选中类别的设备默认着色；
8. 选中的类别但没有规定值的设备默认着色
9. 负载情况可多选，可控制着轻载、重在、过载的一个或多个；

着色规则:
1. 不区分类别
2. 负载率值分类和着色：

| 类别    | 负载率 |颜色|
|---|:---|---|
| 轻载    | 小于20%           |![蓝色](./images/b.png)|
| 重在    | 大于等于80% 且 小于100% |![橙色](./images/orange.png)|
| 过载    | 大于等于100%         |![红色](./images/red.png)|
|正常| 大于等于20% 且 小于80% |![绿色](./images/green.png)|

默认数据颜色: ![222,225,228](./images/light_gray.png)

异常数据颜色: ![0,0,0](./images/black.png)


##实现

在原电网WMS服务的请求连接新增控制参数，实现专题图功能需求。

只对规划使用的WMS参数进行特别说明，如下是真实WMS请求连接的URL:
http://192.168.2.33:9092/services/WMS?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetMap&FORMAT=image/png&TRANSPARENT=true&LAYERS=default&BGCOLOR=0xfFFFFF
&token=9102mjaxni0wmy0wosaxny01nc0zos41odgw
&ID=1
&CRS=EPSG:900913&STYLES&WIDTH=1534&HEIGHT=749&
BBOX=11664439.1844,3066776.44904,11682160.1341,3075610.39175
&rendermode=204
&ghclasses=A3,B7,C0,D0,E0,F0

下面的表格说明规划规划使用到的参数：

| 参数   	     | 值		  		     |  描述       |
| -------------|:---------------:|:-----------|
| rendermode   | 204或者214     		     | 指定按负载率渲染电网图      |
| ghclasses    | 逗号分隔的A~F   | 可变字符串,指定对那些类别的设备进行规则着色,类别后加用于位运算的十进制数,1 ：001 只着轻载；2:010执着重载；4：100只着过载 |

---

#N-1通过率

##需求
已明确需求：

1. 设备依据所属线路rowbuffer字段[AREALEVEL] 属性分类；
2. 依据设备所属线路N-1通过率进行着色
3. N-1通过率的值为0或1，0表示不满足，1表示满足；
3. N-1通过率在实时数据的第三个槽位；
4. 着色的类别可多选；
5. 为选中类别的设备默认着色；
6. 选中的类别但没有规定值的设备默认着色


着色规则：
1. 着色不区分类别；
2. 属性值说明：

| 类别    | N-1通过率|
	| -------|:-------:|
	| 超标值      | 0     |
	| 正常值      | 1     |
3. 着色值分布：

|    	| 选中 |  未选中  |
| -------|:--------:|:-------:|
| 超标   | ![255,0,0](./images/red.png)   | ![222,225,228](./images/light_gray.png)|    	
| 正常   | ![0,255,0](./images/green.png) | ![222,225,228](./images/light_gray.png) |

默认颜色：![222,225,228](./images/light_gray.png)

异常数据：![0,0,0](./images/black.png)

##实现
在原电网WMS服务的请求连接新增控制参数，实现专题图功能需求。

只对规划使用的WMS参数进行特别说明，如下是真实WMS请求连接的URL:
http://192.168.2.33:9092/services/WMS?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetMap&FORMAT=image/png&TRANSPARENT=true&LAYERS=default&BGCOLOR=0xfFFFFF
&token=9102mjaxni0wmy0wosaxny01nc0zos41odgw
&ID=1
&CRS=EPSG:900913&STYLES&WIDTH=1534&HEIGHT=749&
BBOX=11664439.1844,3066776.44904,11682160.1341,3075610.39175
&rendermode=205
&ghclasses=A,B,C,D,E,F

下面的表格说明规划规划使用到的参数：

| 参数   	     | 值		  		     |  描述       |
| -------------|:---------------:|:----------|
| rendermode   | 205     		     | 指定按N-1通过率渲染电网图      |
| ghclasses    | 逗号分隔的A~F   | 可变字符串,指定对那些类别的设备进行规则着色  |

##现状
未配置颜色，不能访问。

----

#供电可靠率
##需求
已明确需求：

1. 设备依据所属线路rowbuffer字段[AREALEVEL] 属性分类；
2. 依据设备所属线路可靠率，实时数据的第4位槽位的数据；
3. 可靠率单位%，即可靠率80%，实时数据为80；
4. 着色的类别可多选；
5. 为选中类别的设备默认着色；
6. 选中的类别但没有规定值的设备默认着色


着色规则：

1. 属性值分布

| 类别    | 供电可靠率（正常值） | 供电可靠率（超标值） |
| -------|:-------:|:-------|
| A      | 大于99.999%     | 小于等于99.999%    |
| B      | 大于99.99%     |  小于等于99.99%    |
| C      | 大于99.97%     |  小于等于99.97%    |
| D      | 大于99.93%     |  小于等于99.93%   |
| E      | 大于99.79%     |  小于等于99.79%     |
| F      | 大于99.47%     |  小于等于99.47%    |

2. 色值分布：

|    	| 选中 |  未选中  |
| -------|:--------:|:-------:|
| 超标   | ![255,0,0](./images/red.png)   | ![222,225,228](./images/light_gray.png)|    	
| 正常   | ![0,255,0](./images/green.png) | ![222,225,228](./images/light_gray.png) |

默认颜色：![222,225,228](./images/light_gray.png)

异常数据：![0,0,0](./images/black.png)

##实现
在原电网WMS服务的请求连接新增控制参数，实现专题图功能需求。

只对规划使用的WMS参数进行特别说明，如下是真实WMS请求连接的URL:
http://192.168.2.33:9092/services/WMS?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetMap&FORMAT=image/png&TRANSPARENT=true&LAYERS=default&BGCOLOR=0xfFFFFF
&token=9102mjaxni0wmy0wosaxny01nc0zos41odgw
&ID=1
&CRS=EPSG:900913&STYLES&WIDTH=1534&HEIGHT=749&
BBOX=11664439.1844,3066776.44904,11682160.1341,3075610.39175
&rendermode=206
&ghclasses=A,B,C,D,E,F

下面的表格说明规划规划使用到的参数：

| 参数   	     | 值		  		     |  描述       |
| -------------|:---------------:|:-----------|
| rendermode   | 206     		     | 指定按供电可靠率渲染电网图      |
| ghclasses    | 逗号分隔的A~F   | 可变字符串,指定对那些类别的设备进行规则着色  |

----
#用户平均停电时间

##需求
已明确需求：

1. 设备依据所属线路rowbuffer字段[AREALEVEL] 属性分类；
2. 依据设备所属线路平均停电时间，实时数据的第5位数据；
3. 可靠率单位分钟；
4. 着色的类别可多选；
5. 为选中类别的设备默认着色；
6. 选中的类别但没有规定值的设备默认着色

着色规则：

1. 属性值：

| 类别    | 停电时间（正常值） |  停电时间（超标值）  |
| -------|:-------:|:-------|
| A      | 小于5.2min     |  大于等于5.2min     |
| B      | 小于52.5min     | 大于等于52.5min      |
| C      | 小于150min     |  大于等于150min      |
| D      | 小于360min     |  大于等于360min     |
| E      | 小于1080min    |  大于等于1080min      |
| F      | 小于27605min    | 大于等于27605min     |
2. 色值分布:

|    	| 选中 |  未选中  |
| -------|:--------:|:-------:|
| 超标   | ![255,0,0](./images/red.png)   | ![222,225,228](./images/light_gray.png)|    	
| 正常   | ![0,255,0](./images/green.png) | ![222,225,228](./images/light_gray.png) |

默认颜色：![222,225,228](./images/light_gray.png)

异常数据：![0,0,0](./images/black.png)


##实现
在原电网WMS服务的请求连接新增控制参数，实现专题图功能需求。

只对规划使用的WMS参数进行特别说明，如下是真实WMS请求连接的URL:
http://192.168.2.33:9092/services/WMS?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetMap&FORMAT=image/png&TRANSPARENT=true&LAYERS=default&BGCOLOR=0xfFFFFF
&token=9102mjaxni0wmy0wosaxny01nc0zos41odgw
&ID=1
&CRS=EPSG:900913&STYLES&WIDTH=1534&HEIGHT=749&
BBOX=11664439.1844,3066776.44904,11682160.1341,3075610.39175
&rendermode=207
&ghclasses=A,B,C,D,E,F

下面的表格说明规划规划使用到的参数：

| 参数   	     | 值		  		     |  描述       |
| -------------|:---------------:|:-----------|
| rendermode   | 207     		     | 指定停电时间渲染电网图      |
| ghclasses    | 逗号分隔的A~F   | 可变字符串,指定对那些类别的设备进行规则着色  |

##现状
未配置颜色，不能访问。

----

#电压质量
##需求
已明确需求：

1. 设备依据所属线路rowbuffer字段[AREALEVEL] 属性分类；
2. 依据设备所属线路电压合格情况着色，实时数据的第6位数据；
3. 0表示不合格的电压质量，1表示合格的电压质量；
4. 着色的类别可多选；
5. 为选中类别的设备默认着色；
6. 选中的类别但没有规定值的设备默认着色

着色规则：
1. 不区分类别
2. 属性值

| 类别    | 电压质量 |
| --------|:-------:|
| 超标值  | 0     |
| 正常值  | 1     |
3. 色值分布

|    	| 选中 |  未选中  |
| -------|:--------:|:-------:|
| 超标   | ![255,0,0](./images/red.png)   | ![222,225,228](./images/light_gray.png)|    	
| 正常   | ![0,255,0](./images/green.png) | ![222,225,228](./images/light_gray.png) |

默认颜色：![222,225,228](./images/light_gray.png)

异常数据：![0,0,0](./images/black.png)

##实现
在原电网WMS服务的请求连接新增控制参数，实现专题图功能需求。

只对规划使用的WMS参数进行特别说明，如下是真实WMS请求连接的URL:
http://192.168.2.33:9092/services/WMS?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetMap&FORMAT=image/png&TRANSPARENT=true&LAYERS=default&BGCOLOR=0xfFFFFF
&token=9102mjaxni0wmy0wosaxny01nc0zos41odgw
&ID=1
&CRS=EPSG:900913&STYLES&WIDTH=1534&HEIGHT=749&
BBOX=11664439.1844,3066776.44904,11682160.1341,3075610.39175
&rendermode=208
&ghclasses=A,B,C,D,E,F

下面的表格说明规划规划使用到的参数：

| 参数   	     | 值		     |  描述       |
| -------------|:---------------:|:----------|
| rendermode   | 208     		     | 指定电压质量渲染电网图      |
| ghclasses    | 逗号分隔的A~F   | 可变字符串,指定对那些类别的设备进行规则着色  |

##现状
未配置颜色，不能访问。

----

#线损/网损

##需求
已明确需求：

1. 设备依据所属线路rowbuffer字段[AREALEVEL] 属性分类；
2. 依据设备所属线路线损率着色，实时数据的第7位数据；
3. 线损率单位%，即线损8%，实时数据值为8；
4. 着色的类别可多选；
5. 为选中类别的设备默认着色；
6. 选中的类别但没有规定值的设备默认着色

未明确的需求如下：

1. 每个着色标准的颜色值；

*说明：现在的默认颜色是红色*

着色规则：
1. 着色不区分类别
2. 如下为详细着色规范

| 线损率 | 颜色   |
|:-------:|:-------|
| 大于等于0 且 小于2    | ![0,241,95](./images/a.png)     |
| 大于等于2 且 小于3    | ![0,78,255](./images/b.png)     |
| 大于等于3 且 小于4    | ![0,0,204](./images/c.png)     |
| 大于等于4 且 小于5    | ![182,1,220](./images/d.png)     |
| 大于等于5          | ![102,0,204](./images/e.png)     |

默认颜色：![222,225,228](./images/light_gray.png)

异常数据：![0,0,0](./images/black.png)

##实现
在原电网WMS服务的请求连接新增控制参数，实现专题图功能需求。

只对规划使用的WMS参数进行特别说明，如下是真实WMS请求连接的URL:
http://192.168.2.33:9092/services/WMS?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetMap&FORMAT=image/png&TRANSPARENT=true&LAYERS=default&BGCOLOR=0xfFFFFF
&token=9102mjaxni0wmy0wosaxny01nc0zos41odgw
&ID=1
&CRS=EPSG:900913&STYLES&WIDTH=1534&HEIGHT=749&
BBOX=11664439.1844,3066776.44904,11682160.1341,3075610.39175
&rendermode=209
&ghclasses=A,B,C,D,E,F

下面的表格说明规划规划使用到的参数：

| 参数   	     | 值		     |  描述       |
| -------------|:---------------:|:----------|
| rendermode   | 209     		     | 指定线损率渲染电网图      |
| ghclasses    | 逗号分隔的A~F   | 可变字符串,指定对那些类别的设备进行规则着色  |

##现状
未配置颜色，不能访问。

----

#偏长线路回数

##需求
以明确的需求：

1. 设备依据所属线路rowbuffer字段[AREALEVEL] 属性分类；
2. 只对低压设备进行着色；
3. 根据低压设备所属台区的线路长度进行着色，台区线路长度在实时数据第8位；
4. 台区线路长度单位为米(m);
5. 低压设备rowBuffer属性[LV_SITE\_ID]记录了低压设备所属台区的ID；
6. 着色的类别可多选；
7. 为选中类别的设备默认着色；
8. 选中的类别但没有规定值的设备默认着色

未明确的需求如下：

1. 每个着色标准的颜色值；
2. 那些classid的设备为低压设备
未明确的需求如下：

1. 每个着色标准的颜色值；

*说明：现在的默认颜色是红色*

详细着色配置：

| 类别    | 台区线路长度(m) |  颜色值  |
| -------|:-------:|:-------|
| A      |  大于200   | 待定     |
| B      |  大于200   | 待定     |
| C      |  大于250   | 待定     |
| D      |  大于250   | 待定     |
| E      |  大于300   | 待定     |
| F      |  大于500   | 待定     |

##实现
在原电网WMS服务的请求连接新增控制参数，实现专题图功能需求。

只对规划使用的WMS参数进行特别说明，如下是真实WMS请求连接的URL:
http://192.168.2.33:9092/services/WMS?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetMap&FORMAT=image/png&TRANSPARENT=true&LAYERS=default&BGCOLOR=0xfFFFFF
&token=9102mjaxni0wmy0wosaxny01nc0zos41odgw
&ID=1
&CRS=EPSG:900913&STYLES&WIDTH=1534&HEIGHT=749&
BBOX=11664439.1844,3066776.44904,11682160.1341,3075610.39175
&rendermode=210
&ghclasses=A,B,C,D,E,F

下面的表格说明规划规划使用到的参数：

| 参数   	     | 值		  		     |  描述       |
| -------------|:---------------:|:-----------|
| rendermode   | 210     |       |
| ghclasses    | 逗号分隔的A~F   | 可变字符串,指定对那些类别的设备进行规则着色  |

##现状
未配置颜色，不能访问。

----

#台区电压情况

##需求
已明确需求：

1. 设备依据所属线路rowbuffer字段[AREALEVEL] 属性分类；
2. 只对低压设备进行着色；
3. 根据低压设备所属台区电压进行着色，台区电压在实时数据第9位；
4. 台区电压单位为伏(V);
5. 低压设备rowBuffer属性[LV_SITE\_ID]记录了低压设备所属台区的ID；
6. 着色的类别可多选；
7. 为选中类别的设备默认着色；
8. 选中的类别但没有规定值的设备默认着色

未明确的需求如下：

1. 每个着色标准的颜色值；
2. 那些classid的设备为低压设备

*说明：现在的默认颜色是红色*

详细着色配置：

| 类别    | 台区电压 |  颜色值  |
| -------|:-------:|:-------|
| A      |   小于 198   | 待定     |
| B      |   小于 198   | 待定     |
| C      |   小于 198   | 待定     |
| D      |   小于 198   | 待定     |
| E      |   小于 198   | 待定     |
| F      |   小于 198   | 待定     |

##实现
在原电网WMS服务的请求连接新增控制参数，实现专题图功能需求。

只对规划使用的WMS参数进行特别说明，如下是真实WMS请求连接的URL:
http://192.168.2.33:9092/services/WMS?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetMap&FORMAT=image/png&TRANSPARENT=true&LAYERS=default&BGCOLOR=0xfFFFFF
&token=9102mjaxni0wmy0wosaxny01nc0zos41odgw
&ID=1
&CRS=EPSG:900913&STYLES&WIDTH=1534&HEIGHT=749&
BBOX=11664439.1844,3066776.44904,11682160.1341,3075610.39175
&rendermode=211
&ghclasses=A,B,C,D,E,F

下面的表格说明规划规划使用到的参数：

| 参数   	     | 值		  		     |  描述       |
| -------------|:---------------:|:-----------|
| rendermode   | 211     	 | 台区电压情况专题图   |
| ghclasses    | 逗号分隔的A~F   | 可变字符串,指定对那些类别的设备进行规则着色  |

##现状
未配置颜色，不能访问。

----
#指定设备颜色着色

需求描述：
1. 设备分为若干类别
2. 每个类别有一到多个设备；
3. 每类设备着一种颜色
4. 未指定的设备着默认的浅灰色；

##实现
在原电网WMS服务的请求连接新增控制参数，实现专题图功能需求。

只对规划使用的WMS参数进行特别说明，如下是真实WMS请求连接的URL:
http://192.168.2.33:9092/services/WMS?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetMap&FORMAT=image/png&TRANSPARENT=true&LAYERS=default&BGCOLOR=0xfFFFFF
&token=9102mjaxni0wmy0wosaxny01nc0zos41odgw
&ID=1
&CRS=EPSG:900913&STYLES&WIDTH=1534&HEIGHT=749&
BBOX=11664439.1844,3066776.44904,11682160.1341,3075610.39175
&rendermode=212
&dev_clr=ff0000:A,B,C,D,E,F;ff0000:A,B,C,D,E,F

下面的表格说明规划规划使用到的参数：

| 参数   	     | 值		  		     |  描述       |
| -------------|:---------------:|:-----------|
| rendermode   | 212     	 | 指定设备颜色着色   |
| dev_clr| 类别用分号(;)分隔,颜色和设备ID用冒号(:)分隔,设备ID间用逗号(,)分隔   | 颜色:ID1,ID2,ID3  |

---

#指定项目ID

需求描述：
1. 指定着色的项目ID（可多选)
2. 每个项目可指定一个颜色,当设备同时属于传入的项目时，设备颜色以最大的项目ID的颜色进行着色；


##实现
在原电网WMS服务的请求连接新增控制参数，实现专题图功能需求。

只对规划使用的WMS参数进行特别说明，如下是真实WMS请求连接的URL:
http://192.168.2.33:9092/services/WMS?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetMap&FORMAT=image/png&TRANSPARENT=true&LAYERS=default&BGCOLOR=0xfFFFFF
&token=9102mjaxni0wmy0wosaxny01nc0zos41odgw
&ID=1
&CRS=EPSG:900913&STYLES&WIDTH=1534&HEIGHT=749&
BBOX=11664439.1844,3066776.44904,11682160.1341,3075610.39175
&rendermode=213
&poj_clr=10013:ff0000;10014:ff0000;

下面的表格说明规划规划使用到的参数：

| 参数   	     | 值		  		     |  描述       |
| -------------|:---------------:|:-----------|
| rendermode   | 213     	 | 指定项目ID和颜色着色   |
| dev_clr| 类别用分号(;)分隔,项目ID和颜色用冒号(:)   | 项目ID:颜色;项目ID:颜色  |

---

#未纳入本期实现的专题图

- 导线界面分布（业务逻辑）
	- 中压架空线不符合规定范围着色(专题图)
	- 中压电缆线不符合规定范围着色(专题图)
	- 短路电流(专题图)

