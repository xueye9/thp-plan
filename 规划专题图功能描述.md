
#设备着色

所有设备按rowbuffer字段[AREALEVEL]属性值进行分类,属性值为字符串值"A"、"B"、"C"、"D"、"E"、"F"对应A、B、C、D、E、F类。分类字段取值规则在不同专题图是不同的，例如供电距离分析分类属性获取自设备所属于的线路，架空线绝缘化率专题图设备分类属性获取自设备自身的属性。

类别对应的属性值：

| 类别  |  [AREALEVEL]属性值 |
|---|---|
|A|  "A"|
|B|  "B"|
|C|  "C"|
|D|  "D"|
|E|  "E"|
|F|  "F"|

共有如下12种专题图：

1. 供电距离分析
2. 接线模式识别

#供电距离分析

##需求
设备根据所属线路的供电距离和所属的类别进行着色。已明确需求如下：

1. 设备依据所属线路rowbuffer字段[AREALEVEL] 属性分类；
2. 设备的供电距离值来自线路的供电距离；
3. 供电距离值存放在实时数据的第一个槽位；
4. 供电距离单位为m；
5. 着色的类别可多选；
6. 未选择和选中但供电距离不满足要求的设备按默认颜色着色；

未明确的需求如下：

1. 是否所有点状设备（站房、台边、箱变，负荷）都包含于线路,特别是杆塔；
2. 每个着色标准的颜色值；

*说明：现在的默认颜色是红色*

详细着色配置：

| 类别   | 供电距离 |  颜色值  |
| -------|:--------:| --------:|
| A      | >3KM     | 待定     |
| B      | >4KM     | 待定     |
| C      | >6KM     | 待定     |
| D      | >6KM     | 待定     |
| E      | >10KM    | 待定     |
| F      | >15KM    | 待定     |

##实现
在原电网WMS服务的请求连接新增控制参数，实现专题图功能需求。

只对规划使用的WMS参数进行特别说明，如下是真实WMS请求连接的URL:
http://192.168.2.33:9092/services/WMS?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetMap&FORMAT=image/png&TRANSPARENT=true&LAYERS=default&BGCOLOR=0xfFFFFF
&token=9102mjaxni0wmy0wosaxny01nc0zos41odgw
&ID=1
&CRS=EPSG:900913&STYLES&WIDTH=1534&HEIGHT=749&
BBOX=11664439.1844,3066776.44904,11682160.1341,3075610.39175
&rendermode=201
&ghclasses=A,B,C,D,E,F

下面的表格说明规划规划使用到的参数：

| 参数   	     | 值		  		     |  描述       |
| -------------|:---------------:| -----------:|
| rendermode   | 201     		     | 指定按供电距离渲染电网图      |
| ghclasses    | 逗号分隔的A~F   | 可变字符串,指定对那些类别的设备进行规则着色  |

##现状
因数据NET表中的设备分类字段没有数据，暂时还不能出图。

-------

#接线模式识别

##需求
已明确需求：

1. 设备依据所属线路rowbuffer字段[AREALEVEL] 属性分类；
2. 设备接线模式依据线路rowBuffer字段[CONMODE]；
3. 接线模式属性用中文字符串描述
4. 着色的类别可多选；
5. 未选中和选中但无对应着色的接线模式（非标准）的设备用默认颜色着色；

未明确的需求如下：

1. 是否所有点状设备（站房、台边、箱变，负荷）都包含于线路,特别是杆塔；
2. 每个着色标准的颜色值；
3. 非标准的接线模式有那些，分别用什么字符串值来表示；

*说明：现在的默认颜色是红色*

详细着色配置：

| 类别    | 接线模式 |  颜色值  |
| -------|:------ -:| -------:|
| A      | 待定     | 待定     |
| B      | 待定     | 待定     |
| C      | 待定     | 待定     |
| D      | 待定     | 待定     |
| E      | 待定     | 待定     |
| F      | 待定     | 待定     |

##实现
在原电网WMS服务的请求连接新增控制参数，实现专题图功能需求。

只对规划使用的WMS参数进行特别说明，如下是真实WMS请求连接的URL:
http://192.168.2.33:9092/services/WMS?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetMap&FORMAT=image/png&TRANSPARENT=true&LAYERS=default&BGCOLOR=0xfFFFFF
&token=9102mjaxni0wmy0wosaxny01nc0zos41odgw
&ID=1
&CRS=EPSG:900913&STYLES&WIDTH=1534&HEIGHT=749&
BBOX=11664439.1844,3066776.44904,11682160.1341,3075610.39175
&rendermode=202
&ghclasses=A,B,C,D,E,F

下面的表格说明规划规划使用到的参数：

| 参数   	     | 值		  		     |  描述       |
| -------------|:---------------:| -----------:|
| rendermode   | 202     		     | 指定按供电距离渲染电网图      |
| ghclasses    | 逗号分隔的A~F   | 可变字符串,指定对那些类别的设备进行规则着色  |

##现状
线路没有rowbuffer属性[CONMODE]，暂时还不能出图。
-------

#架空线绝缘化率

##需求
已明确需求：

1. 设备依据自身 rowbuffer[AREALEVEL] 属性分类；
2. 只对架空线进行区分着色，其他类型的设备着默认颜色；
3. 依据架空线rowBuffer字段[CONDTYPE]表示的架空线类型判断架空线绝缘化率
4. 型号名称中带"V"或者"Y"则非绝缘架空线
5. 类别可多选；
6. 未选中类别的架空线着默认颜色；
7. 对选中类别的非绝缘架空线进行着色；

未明确的需求如下：

1. 每个着色标准的颜色值；

*说明：现在的默认颜色是红色*

详细着色配置：

| 类别    | 接线模式 |  颜色值  |
| -------|:------ -:| -------:|
| A      | 待定     | 待定     |
| B      | 待定     | 待定     |
| C      | 待定     | 待定     |
| D      | 待定     | 待定     |
| E      | 待定     | 待定     |
| F      | 待定     | 待定     |

##实现
在原电网WMS服务的请求连接新增控制参数，实现专题图功能需求。

只对规划使用的WMS参数进行特别说明，如下是真实WMS请求连接的URL:
http://192.168.2.33:9092/services/WMS?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetMap&FORMAT=image/png&TRANSPARENT=true&LAYERS=default&BGCOLOR=0xfFFFFF
&token=9102mjaxni0wmy0wosaxny01nc0zos41odgw
&ID=1
&CRS=EPSG:900913&STYLES&WIDTH=1534&HEIGHT=749&
BBOX=11664439.1844,3066776.44904,11682160.1341,3075610.39175
&rendermode=202
&ghclasses=A,B,C,D,E,F

下面的表格说明规划规划使用到的参数：

| 参数   	     | 值		  		     |  描述       |
| -------------|:---------------:| -----------:|
| rendermode   | 202     		     | 指定按供电距离渲染电网图      |
| ghclasses    | 逗号分隔的A~F   | 可变字符串,指定对那些类别的设备进行规则着色  |

-------

#

##需求
已明确需求：

未明确的需求如下：

1. 是否所有点状设备（站房、台边、箱变，负荷）都包含于线路,特别是杆塔；
3. 每个着色标准的颜色值；
4. 非标准的接线模式有那些，分别用什么字符串值来表示；

*说明：现在的默认颜色是红色*

详细着色配置：

| 类别    | 接线模式 |  颜色值  |
| -------|:------ -:| -------:|
| A      | 待定     | 待定     |
| B      | 待定     | 待定     |
| C      | 待定     | 待定     |
| D      | 待定     | 待定     |
| E      | 待定     | 待定     |
| F      | 待定     | 待定     |

##实现
在原电网WMS服务的请求连接新增控制参数，实现专题图功能需求。

只对规划使用的WMS参数进行特别说明，如下是真实WMS请求连接的URL:
http://192.168.2.33:9092/services/WMS?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetMap&FORMAT=image/png&TRANSPARENT=true&LAYERS=default&BGCOLOR=0xfFFFFF
&token=9102mjaxni0wmy0wosaxny01nc0zos41odgw
&ID=1
&CRS=EPSG:900913&STYLES&WIDTH=1534&HEIGHT=749&
BBOX=11664439.1844,3066776.44904,11682160.1341,3075610.39175
&rendermode=202
&ghclasses=A,B,C,D,E,F

下面的表格说明规划规划使用到的参数：

| 参数   	     | 值		  		     |  描述       |
| -------------|:---------------:| -----------:|
| rendermode   | 202     		     | 指定按供电距离渲染电网图      |
| ghclasses    | 逗号分隔的A~F   | 可变字符串,指定对那些类别的设备进行规则着色  |
